---
import { Image } from 'astro:assets';
import type { ImageMetadata } from 'astro';
import FormattedDate from '@/components/FormattedDate.astro';
import { formatDescription } from './BaseCard.astro';

interface Props {
  post: any;
  collection?: string;
}

const { post, collection = 'blog' } = Astro.props;
const hero = post?.data?.heroImage as ImageMetadata | undefined;
const quality = 80;
const postUrl = `/${collection}/${post.id}/`;
const formattedDescription = formatDescription(post.data.description);

let margin = '';
if (post.id === 'img2') {
  margin = '!mt-0';
}
---

<a
  href={postUrl}
  class="flex flex-grow h-[100vh] w-full text-white object-cover relative py-10"
>
<div class="bg-black">
  {hero && (
    <Image
      src={hero}
      width={1280}
      quality={quality}
      alt={post.data.title}
      class="w-full h-full object-cover opacity-50"
      loading="lazy"
      decoding="async"
    />
  )}
</div>
  <div
    class="absolute bottom-16 left-6 font-bold pr-16 flex flex-col gap-3  w-full"
  >
    <p class="text-6xl font-medium ">{post.data.title}</p>
    <p class="text-2xl" set:html={formattedDescription}></p>
   <div class="flex items-center"> <FormattedDate date={new Date(post.data.pubDate)} /> </div>
  </div>
</a>
