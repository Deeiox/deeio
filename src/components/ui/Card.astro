---
import { Image } from 'astro:assets';
import type { ImageMetadata } from 'astro';
import FormattedDate from '@/components/FormattedDate.astro';
import { getRandomMargin } from './BaseCard.astro';

interface Props {
  post: any;
}

const { post } = Astro.props;
const hero = post?.data?.heroImage as ImageMetadata | undefined;
const postUrl = `/blog/${post.id}/`;

let margin = '';
if (post.id === 'img2') {
  margin = '!mt-0';
}
---

<li class={`md:${getRandomMargin()} ${margin} relative`}>
  <a
    href={postUrl}
    class="relative flex flex-col gap-2 p-6 max-w-96"
  >
    {hero && (
      <Image
        src={hero}
        width={1280}
        quality={80}
        alt={post.data.title}
        class="w-full"
        loading="lazy"
        decoding="async"
      />
    )}

    <p class="font-bold text-xl">{post.data.title}</p>
  </a>
  <p class="absolute rotate-90 -right-8 bottom-24">
    <FormattedDate date={new Date(post.data.pubDate)} />
  </p>
</li>