---
import { Image } from 'astro:assets';
import type { ImageMetadata } from 'astro';
import FormattedDate from '@/components/FormattedDate.astro';

interface Props {
  post: any;
  collection?: string;
}

const { post, collection = 'blog' } = Astro.props;
const hero = post?.data?.heroImage as ImageMetadata | undefined;
const postUrl = `/${collection}/${post.id}/`;
---

<a
  href={postUrl}
  class="relative gap-2 grid md:grid-cols-2 items-start"
>
  {hero && (
    <Image
      src={hero}
      width={1280}
      quality={80}
      alt={post.data.title}
      class="miniature object-cover"
      loading="lazy"
      decoding="async"
    />
  )}
  <div class="flex flex-col col-span-1 md:pr-6">
    <p class="font-bold text-xl">{post.data.title}</p>
    <p>{post.data.description}</p>
    <div class="flex items-center">
      <FormattedDate date={new Date(post.data.pubDate)} />
    </div>
  </div>
</a>
